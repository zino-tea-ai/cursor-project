# PM Screenshot Tool 开发日志

> 📌 **重要**：这个文件用于记录开发进度和重要决策，防止对话上下文丢失
> 
> 💡 **使用方法**：每次和AI对话时，让AI先读取这个文件了解上下文

---

## 项目概述

- **项目名称**: PM Screenshot Tool
- **用途**: 产品经理竞品分析截图工具
- **创建时间**: 2025年12月
- **核心功能**: 
  1. 从 screensdesign.com 下载竞品App截图
  2. AI自动分析分类（Claude + GPT）
  3. 生成结构化分析报告

---

## 当前状态 (2025-12-14)

### ✅ 已完成功能
- [x] 截图下载（Selenium + Chrome调试模式）
- [x] 图片处理（宽度402px，PNG格式）
- [x] AI分析分类（Claude Vision + GPT Vision）
- [x] 三层验证机制（关键词+位置+序列）
- [x] 多格式报告生成（MD/CSV/JSON）
- [x] Web界面（Flask）
- [x] 竞品数据库（Sensor Tower Top 30）
- [x] **人工排序筛选工具**（2025-12-14 新增）

### 📱 已分析竞品
| 产品 | 类别 | 截图数 | 状态 |
|------|------|--------|------|
| Cal AI | 卡路里追踪 | 93张 | ✅ 完成 |
| Calm | 冥想睡眠 | 120张 | ✅ 完成 |
| Flo | 女性健康 | 93张 | ✅ 完成 |
| MyFitnessPal | 卡路里计数 | 200张 | ✅ 完成 |
| Runna | 跑步训练 | 200张 | ✅ 完成 |
| Strava | 运动社交 | 200张 | ✅ 完成 |
| Peloton | 健身训练 | 109张 | ⏳ 已下载待分析 |

### 🔄 进行中
- [ ] Peloton 截图的人工排序筛选

### 📋 待办事项
- [ ] 修复 `config/products.json` 重复内容问题
- [ ] 修复 `ai_analysis/README.md` 重复内容问题

---

## 开发日志

### 2025-12-14 (下午)
- **重构工作流**：新增「人工排序筛选」步骤，在 AI 分析之前进行
- **增强排序工具** (`templates/sort_screens.html`)：
  - 新增多选功能（Ctrl+点击、Shift+范围选择）
  - 新增删除截图功能（标记待删除 → 应用时移至 deleted 文件夹）
  - 新增键盘快捷键（Ctrl+A 全选、Delete 删除、Esc 取消）
  - 优化信息栏显示（已选中、待删除计数）
- **新增 API**：
  - `/api/delete-screens` - 删除截图（移至 deleted 备份）
  - `/api/restore-screens` - 从 deleted 恢复截图
- 下载 Peloton 截图（109张）

### 2025-12-14 (上午)
- 创建开发日志文件 `DEVELOPMENT_LOG.md`
- 整理项目结构和当前状态

### 2025-12-13
- 下载 Cal AI 截图（93张）
- 遇到搜索API问题，改用直接URL下载解决

---

## 重要决策记录

| 日期 | 决策 | 原因 |
|------|------|------|
| 2025-12-14 | AI分析前先人工排序筛选 | 下载的截图顺序可能混乱，人工初筛提高AI分析质量 |
| 2025-12-14 | 删除的截图移至deleted备份 | 保留恢复能力，避免误删 |
| 2025-12 | 截图宽度402px | 适合Figma导入，移动端预览合适 |
| 2025-12 | Claude做截图分析 | Vision能力更强，分类更准确 |
| 2025-12 | GPT做报告生成 | 400K大上下文，适合汇总 |
| 2025-12 | 扁平文件夹结构 | 方便批量导入Figma |
| 2025-12 | 命名格式: `[阶段]_[步骤]_[描述].png` | 便于排序和理解 |

---

## 工作流程（2025-12-14 更新）

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  1. 下载截图     │ →  │  2. 人工排序筛选  │ →  │  3. AI分析分类   │ →  │  4. 生成报告     │
│  (Selenium)     │    │  (Web工具)      │    │  (Claude/GPT)   │    │  (MD/CSV/JSON)  │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
                              ↓
                       - 调整截图顺序
                       - 删除无用截图
                         (重复/模糊/无关)
```

### 排序筛选工具使用方法

访问 `http://localhost:5000/sort` 或从主页点击进入

**快捷键：**
| 操作 | 快捷键 |
|------|--------|
| 全选 | `Ctrl+A` |
| 删除选中 | `Delete` |
| 取消选择 | `Esc` |
| 多选 | `Ctrl+点击` |
| 范围选择 | `Shift+点击` |

**操作流程：**
1. 选择产品项目
2. 拖拽调整截图顺序
3. 选中无用截图并删除（备份到 deleted 文件夹）
4. 点击「应用修改」确认

---

## 技术备忘

### 常用命令

```bash
# 启动Web应用
python app.py

# AI分析项目
python ai_analysis/batch_ai_analyze.py --project Calm_Analysis

# 批量下载（需要先启动Chrome调试模式）
python smart_batch_download.py

# 启动Chrome调试模式
chrome.exe --remote-debugging-port=9222
```

### 关键配置文件

| 文件 | 用途 |
|------|------|
| `config/api_keys.json` | API密钥（Claude/OpenAI） |
| `config/products.json` | 已分析产品配置 |
| `config/tags_library.json` | 标签分类库 |
| `data/competitors.json` | 竞品数据库（Top 30） |

### 屏幕类型分类

| 类型 | 中文 | 说明 |
|------|------|------|
| Launch | 启动页 | 品牌展示 |
| Welcome | 欢迎页 | 价值主张 |
| Permission | 权限请求 | 系统弹窗 |
| SignUp | 注册登录 | 账户流程 |
| Onboarding | 引导问卷 | 重点分析 |
| Paywall | 付费墙 | 订阅转化 |
| Home | 首页 | 仪表盘 |
| Feature | 功能页 | 核心功能 |

---

## 已知问题

| 问题 | 状态 | 描述 |
|------|------|------|
| products.json重复 | 🔴 待修复 | 配置文件有重复内容需要清理 |

---

## 下次继续的地方

> 📍 **每次结束对话前更新这里**
> 
> 当前进度：已完成人工排序筛选工具，新工作流程生效
> 
> 下一步计划：
> 1. 使用排序工具处理 Peloton 的 109 张截图
> 2. 对筛选后的截图运行 AI 分析
> 3. 生成 Peloton 分析报告

---

## 备注

- 记忆ID: 12075558 - 包含工作流基本信息
- 用户身份: 产品经理，进行竞品分析

